/*
*= require_self
*/

@import "type";
@import "normalize";

$primary: #2BA4BF;
$darker_gray: #333;
$dark_gray: #666;
$gray: #999;
$light_gray: #ccc;
$lighter_gray: #eee;
$serif_stack: CharisSIL, Georgia, serif;
$mono_stack: Monaco, monospace;

$line_height: 24px;

@mixin shadow {
  -moz-box-shadow:0 4px 8px rgba(0, 0, 0, 0.2);
  -webkit-box-shadow:0 4px 8px rgba(0, 0, 0, 0.2);
  box-shadow:0 4px 8px rgba(0, 0, 0, 0.2);
}

article, aside, details, figcaption, figure,  footer, header, hgroup, menu, nav, section, summary {display:block;}

/* //////////////////////////
  Base Styles
*/
html { overflow-y: scroll; }
body {
  background:#fff;
  color:$darker_gray;
  font-family:$serif_stack;
  font-size:16px;
  line-height:$line_height;
  padding:20px;
}
a {
  &:link {
    color:$primary;
    text-decoration:none;
    -webkit-transition: color .1s ease-in-out;
    -moz-transition: color .1s ease-in-out;
    -o-transition: color .1s ease-in-out;
    -ms-transition: color .1s ease-in-out;
    transition: color .1s ease-in-out;
  }
  &:visited {
    color:mix(#000, $primary, 20%);
  }
  &:hover, &:active {
    color: mix(#fff, $primary, 20%);
    text-decoration:underline;
  }
}
.siteheader, .sitefooter {
  a {
    color:$gray;
    &:active, &:hover {
      color:$dark_gray
    }
  }
}
h1, h2, h3, h4, h5, p, ul, ol, dl, dd, hgroup, table {margin:$line-height 0;font-weight:normal;}
hgroup h1, hgroup h2, hgroup h3, hgroup h4, hgroup h5 {margin-bottom:0;}
h1 {font-size:42px;line-height:$line_height*2;margin-top:$line_height/2;}
h2 {font-size:24px;line-height:$line_height*1.5;}
h3 {font-size:21px;line-height:$line_height;}
h4 {font-size:18px;line-height:$line_height;}
h5 {font-size:16px;line-height:$line_height;}
ul {
  list-style:disc;
  ul {
    list-style:circle;
  }
}
sup, sub {
  position : relative;
  font-size : 75%;
  line-height : 0;
}
sup {
  top : -.5em;
}
sub {
  bottom : -.25em;
}
blockquote {
  padding:0 $line_height;
  color:$dark_gray;
}
dt {
  font-weight:bold;
}
figure {
  margin-bottom:$line-height;
  img {
    max-width:100%;
    display:block;
    margin:0 auto 12px;
  }
}
figcaption {
  color:#dark_gray;
  line-height:16px;
  font-size:13px;
}
hr {
  background-color: $light_gray;
  border: 0;
  height:1px;
  margin:23px 0 $line_height;
  clear:both;
}
pre, code, kbd, samp {font-family:$mono_stack;}

#wrapper {margin:0 auto;}

.siteheader {
  @extend .row;
  border-bottom:1px dotted $light_gray;
  font-size:24px;
  line-height:32px;
  color:$light_gray;
  nav {
    @extend .twelve;
  }
  p {
    margin:0 0 16px;
  }
}
.main {
  @extend .eight;
}
.sidebar {
  @extend .four;
  
  margin-bottom:$line_height;
}
.sitefooter {
  @extend .row;
  color:$gray;
  border-top:1px dotted $light_gray;
  clear:both;
  p {
    @extend .twelve;
    margin-top:$line-height/2;
    margin-bottom:$line-height/2;
  }
  #contact {
    float:right;
  }
}

/* //////////////////////////
  Evening Styles
*/
body.evening {
  background:#333;
  color:#ddd;
  text-shadow:0 1px 1px rgba(0,0,0,.5);
  h1 {
    color:#fff;
  }
  blockquote {
    color:#bbb;
  }
  #footnotediv {
    color:#333;
  }
  .siteheader ul, .sitefooter, &.home h2 {border-color:#666;}
}
.siteheader + article {
  @extend .row;
}


/* //////////////////////////
  Helper Classes
*/
.left {
  float:left;
  margin:0 10px 10px 0;
}
.right {
  float:right;
  margin:0 0 10px 10px;
}
.clearfix:before, .clearfix:after {
  content: ".";
  display: block;
  height: 0;
  overflow: hidden;
}
.clearfix:after {clear: both;}
.clearfix {zoom: 1;} /* IE < 8 */

.flash {
  margin:$line_height 0;
  background:#fafafa;
  border:1px solid #eee;
  padding:10px;
  ul {
    padding-left:$line_height;
  }
}
.success {
  @extend .flash;
  @extend .twelve;
  background:rgba(0,128,0,.2);
  border-color:rgb(0,128,0);
}
.alert {
  @extend .flash;
  @extend .twelve;
  background:rgba(255,187,0,.2);
  border-color:rgb(255,187,0);
}
.error {
  @extend .flash;
  @extend .twelve;
  background:rgba(255,0,0,.2);
  border-color:rgb(255,0,0);
}
.cover {
  display:block;
  max-width:148px;
  min-height:180px;
  font-size:16px;
  margin-left:auto;
  margin-right:auto;
  color:$gray;
  background-color:$lighter_gray;
  text-align:center;
  font-weight:italic;
  @include shadow;
}

// Admin styles
.everything {
  .main {
    @extend .twelve;
  }
  table {
    width:100%;
    border-collapse:collapse;
  }
  td, th {
    border:1px solid #ddd;
    padding:4px;
  }
  th {
    background:rgba(0,0,0,.25);
  }
}
.edit_link {
  background: rgba(0,0,0,.05);
  border-radius: 8px 0 0 8px;
  box-shadow: -1px 1px 2px rgba(0, 0, 0, 0.2);
  float: left;
  margin-left: -56px;
  padding: 8px;
  font-variant:small-caps;
  letter-spacing:1px;
}

/* //////////////////////////
  Page-Specific Styles
*/
.home {
  .main {
    @extend .twelve;
    article {
      @extend .four;
      a {
        font-size:21px;
        display:block;
        margin-bottom:12px;
      }
    }
  }
  #latest_work {
    a {
      @include shadow;
      height:$line_height*8;
      overflow:hidden;
    }
  }
  #latest_writing a {
    text-align:center;
  }
  h1 {
    font-size:24px;
    line-height:32px;
  }
  h2 {
    color:$gray;
    text-transform:uppercase;
    font-size:16px;
    letter-spacing:2px;
    padding:6px 0;
    border-top:1px dotted $light_gray;
    border-bottom:1px dotted $light_gray;
    margin-top:0;
  }
  .cover {
    margin-bottom: $line-height;
    float:right !important;
  }
}
.books.index {
  .main {
    @extend .twelve;
  }
  ol {
    list-style:none;
    text-align:center;
    li {
      display:inline-block;
      vertical-align:middle;
      margin:0 10px $line_height;
    }
    a {
      display:block;
      text-decoration:none;
    }
    img {
      width:132px;
    }
  }
}
.books.show {
  .sidebar {
    margin-top:$line-height;
    margin-bottom:$line-height;
    span, a {
      display:block;
      text-align:center;
    }
    .book_title {
      margin-top:$line_height;
    }
    .book_author {
      font-size:14px;
      font-variant:small-caps;
      letter-spacing:1px;
    }
    .book_publisher, a {
      font-size:14px;
    }
  }
}
.works {
  figure {
    img {
      @include shadow;
    }
  }
  &.index {
    .main {
      @extend .twelve;
    }
    article {
      clear:both;
    }
    figure {
      @extend .eight;
      margin-left:0 !important;
      margin-right:2.04% !important;
    }
  }
}
.writings.index {
  .main {
    @extend .twelve;
    .pub_date {
      @extend .four;
      text-align:right;
      color:$light_gray;
    }
    ol {
      list-style:none;
      overflow:hidden;
      a {
        display:block;
        font-size:24px;
      }
    }
    li {
      overflow:hidden;
      article {
        @extend .eight;
      }
    }
  }
}

.new, .edit, .update, .create {
  h1 {
    @extend .twelve;
  }
  label {
    @extend .two;
    clear:left;
  }
  input, textarea {
    @extend .nine;
    padding:4px;
    margin-bottom:20px;
  }
  input[type='submit'] {
    width:auto;
    clear:both;
    margin:20px 0 20px 168px;
  }
}

.wishlist_items.index {
  .main {
    @extend .twelve;
  }
  h1, h2, h3 {clear:both;}
  h3 {color:#E6A525;}
  h4 {margin-top:0;}
  ul {
    @extend .clearfix;
    list-style:none;
    margin-left:-1.04%;
    margin-right:-1.04%;
  }
  #charity {
    li {
      @extend .four;
    }
  }
  #stuff {
    li {
      @extend .four;
      p {
        font-size:14px;
        line-height:21px;
      }
      img {
        max-width:300px;
      }
    }
    h3 {
      clear:both;
      text-transform:uppercase;
      letter-spacing:4px;
      font-weight:bold;
    }
  }
}

/* //////////////////////////
  Footnotes
*/
#footnotes {
  border-top:1px solid $light_gray;
  padding-top:23px;
  margin-top:$line_height*2;
  h2 {
    font-size:16px;
    font-weight:bold;
    letter-spacing:2px;
    text-transform:uppercase;
  }
}
a[rel=footnote] {
  vertical-align:super;
  line-height:.5;
  &:before {
    content:"[";
  }
  &:after {
    content:"]";
  }
}
#footnotediv {
  padding:10px;
  background-color:#fff;
  background-color:#EFECE0;
  -moz-box-shadow:0 4px 8px #666;
  -webkit-box-shadow:0 4px 8px #666;
  box-shadow:0 4px 8px #666;
  behavior: url(/js/PIE.htc);
}

@import "media_queries";
@import "print";